<pec-loading *ngIf="showLoading"></pec-loading>

<ion-row class="head-row" *ngIf="!showCropper">
  <ion-col size="6" class="ion-text-right">
    <ion-button class="btn-width" fill="outline" color="danger" shape="round" (click)="reset()">Reset</ion-button>
  </ion-col>
  <ion-col size="6">
    <ion-button class="btn-width" fill="outline" color="success" shape="round" (click)="save()">
      <i class="pec-icon-check-single"></i>
      &nbsp;Crop!
    </ion-button>
  </ion-col>
</ion-row>

<div class="pec-px-20 pec-w-100">
  <div *ngIf="!showCropper">
    <ion-row>
      <ion-col size="12">
        <ion-button expand="full" (click)="captureImage()" *ngIf="!options.myImage">Capture Image</ion-button>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="9" offset="1.5">
        <image-cropper
          #angularCropper
          [autoCrop]="false"
          [aspectRatio]="this.options.aspectRatio"
          [maintainAspectRatio]="true"
          [format]="'jpeg'"
          [imageQuality]="100"
          [imageBase64]="options.myImage"
          [transform]="transform"
          *ngIf="options.myImage"
        ></image-cropper>
      </ion-col>
    </ion-row>
    <ion-row *ngIf="options.myImage">
      <ion-col size="4" class="pec-pl-0">
        <ion-button class="pec-fs-11 pec-w-100" fill="outline" color="dark" (click)="zoom(true)">
          <!--<ion-icon slot="start" name="add" aria-label="Zoom In"></ion-icon>-->
          Zoom In
        </ion-button>
      </ion-col>
      <ion-col size="4">
        <ion-button class="pec-fs-11 pec-w-100" fill="outline" color="dark" [shape]="''" (click)="zoom(false)">
          <!--<ion-icon slot="start" name="remove" aria-label="Zoom Out"></ion-icon>-->
          Zoom Out
        </ion-button>
      </ion-col>
      <ion-col size="4" class="pec-pr-0">
        <ion-button class="pec-fs-11 pec-w-100" fill="outline" color="dark" (click)="rotate()">
          <!--<ion-icon slot="start" name="refresh" aria-label="Rotate"></ion-icon>-->
          90 deg
        </ion-button>
      </ion-col>

      <ion-col size="6" class="pec-pl-0">
        <ion-button class="pec-fs-11 pec-w-100" fill="clear" color="dark" (click)="flipHorizontally()">
          <!--<ion-icon name="swap-horizontal-outline" size="12"></ion-icon>-->
          &nbsp;Flip Horizontally
        </ion-button>
      </ion-col>
      <ion-col size="6" class="pec-pr-0">
        <ion-button class="pec-fs-11 pec-w-100" fill="clear" color="dark" (click)="flipVertically()">
          <!--<ion-icon name="swap-vertical-outline" size="12"></ion-icon>-->
          Flip Vertically
        </ion-button>
      </ion-col>
    </ion-row>
  </div>
  <ion-row class="head-row" *ngIf="croppedImage">
    <ion-col size="12">
      <ion-buttons>
        <ion-button class="btn-width" fill="outline" color="danger" shape="round" (click)="closeCard()">
          Reset
        </ion-button>
      </ion-buttons>
    </ion-col>
  </ion-row>
  <ion-row *ngIf="croppedImage">
    <ion-col size="12">
      <img
        alt="Cropped Image"
        class="pec-p-0 pec-m-0 pec-bw-1 pec-bc-logo-grey pec-bg-card-dark-grey"
        [src]="croppedImage"
        (change)="save()"
      />
    </ion-col>
  </ion-row>
</div>
