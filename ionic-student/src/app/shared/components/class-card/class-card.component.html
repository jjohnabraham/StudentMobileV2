<ion-card *ngIf="classInfo" [class.classroom-view]="isClassroomPage">
  <div
    (click)="accessGradesOnClick ? accessGrades.emit() : !isClassroomPage && accessClass()"
    aria-label="accessGradesOnClick ? 'Access Grades' : 'Access Class'"
  >
    <div class="pec-fs-11 pec-fw-700 pec-text-white pec-bg-dark card-header-block" *ngIf="cardHeader">
      {{ cardHeader }}
    </div>
    <ion-card-header *ngIf="isHomePage || isClassroomPage">{{ classInfo.CourseName }}</ion-card-header>
    <ion-card-header *ngIf="!isHomePage && course">
      <span
        [class.limit-text]="course.IsFastTrackEligibleClass || course.IsAccelerateAssessmentOpportunityEligibleClass"
      >
        {{ classInfo.CourseName }}
      </span>
      <div
        *ngIf="showAccelerateOrFastTrackIcon"
        class="accelerate-fastrack-icon"
        (click)="beginPresentScheduleFastTrackExamModal(); $event.stopPropagation()"
      ></div>
    </ion-card-header>

    <ion-card-content class="pec-px-12 pec-pb-0" [class.pec-pb-10]="classInfo.IsAccelerated && !isCtu">
      <h5 *ngIf="!isFutureCourse && !(classInfo.IsAccelerated && !isCtu)">
        {{ classInfo.Credits }} Credits | {{ classInfo.StartDate | pecDate: 'MMMM d' | async }} -
        {{ classInfo.EndDate | pecDate: 'MMMM d' | async }}
      </h5>
      <h5 *ngIf="!isOtherCourse && classInfo.StartDate && (isFutureCourse || (classInfo.IsAccelerated && !isCtu))">
        <span *ngIf="classInfo.Credits >= 0 && !(classInfo.IsAccelerated && !isCtu)">
          {{ classInfo.Credits }} Credits
        </span>
        <span *ngIf="classInfo.StartDate && classInfo.Credits >= 0">|</span>
        <span *ngIf="classInfo.StartDate">
          {{
            classInfo.StartDate?.getFullYear() > currentYear
              ? (classInfo.StartDate | pecDate: 'MM/dd/yyyy' | async)
              : (classInfo.StartDate | pecDate: 'MMMM d' | async)
          }}
          -
          {{
            classInfo.StartDate?.getFullYear() > currentYear
              ? (classInfo.EndDate | pecDate: 'MM/dd/yyyy' | async)
              : (classInfo.EndDate | pecDate: 'MMMM d' | async)
          }}
        </span>
      </h5>
      <h5 *ngIf="isOtherCourse">
        {{ classInfo.CourseCode }}
      </h5>
      <h5 *ngIf="!isOtherCourse">
        <span>{{ classInfo.CourseCode }}-{{ classInfo.TermCode }}</span>
        <span *ngIf="classInfo.CourseSection || classInfo.Section">
          -{{ classInfo.Section ? classInfo.Section : classInfo.CourseSection }}
        </span>
        <span *ngIf="classInfo && (isHomePage || isClassroomPage) && classInfo.ShowLDA">
          | LDA:
          <span *ngIf="classInfo.LastDateOfAttendance">
            {{ classInfo.LastDateOfAttendance | pecDate: 'EEE' | async }},
            {{ classInfo.LastDateOfAttendance | pecDate: 'MMMM d' | async }}
          </span>
          <span *ngIf="!classInfo.LastDateOfAttendance">Not yet posted</span>
        </span>
      </h5>
      <div *ngIf="!isHomePage && !isClassroomPage && !isDegreePage">
        <h5 class="color-primary" *ngIf="classInfo.Locations">Meeting Times</h5>
        <ul *ngIf="classInfo.Locations" class="pec-mt-0 pec-ml-0 pec-pl-15">
          <li *ngFor="let location of classInfo.Locations" class="pec-fs-12">
            <b>{{ location.StartTimeFormattedString }}</b>
            {{ location.BuildingDescrip }} ({{ location.RoomNumber }})
          </li>
        </ul>
      </div>
    </ion-card-content>
  </div>
  <ion-grid class="pec-pb-10">
    <ion-row
      *ngIf="
        classInfo && (showContactAndGrades || isHomePage || isClassroomPage) && !(classInfo.IsAccelerated && !isCtu)
      "
    >
      <ion-col size="{{ !isCtu && !showContactAndGrades ? '12' : '8' }}">
        <ng-container *ngIf="!isOtherCourse">
          <pec-contact-box
            *ngIf="
              classInfo.PrimaryInstructorIsActive &&
              classInfo.PrimaryInstructor &&
              !classInfo.PrimaryInstructorIsPlaceHolder
            "
            [contactInfo]="{
              SourceSystem: classInfo.SourceSystemId,
              SyStaffId: classInfo.StaffId,
              EmailAddress: classInfo.PrimaryInstructorEmail,
              ContactGroup: 'Instructor',
              DisplayName: 'FACULTY',
              Name: classInfo.PrimaryInstructor,
              Phone: classInfo.PrimaryInstructorPhone,
              SendBirdChatUserId: classInfo.PrimaryInstructorSendBirdId,
              ClassId: classInfo.ClassId,
              IsDepartment: false
            }"
            [trackEvent]="{
              category: pageTrackTitle,
              action:
                isDegreePage && isCompletedCourse ? 'Tapped to View Completed Course Info' : 'Tapped to View Contact',
              label: isDegreePage && isCompletedCourse ? 'Faculty' : 'Instructor',
              value: '',
              classId: classInfo.ClassId
            }"
          ></pec-contact-box>
        </ng-container>
      </ion-col>
      <ion-col *ngIf="showContactAndGrades || isCtu">
        <div class="pec-br-4 pec-p-1 grade-box">
          <ion-row>
            <h2 class="pec-fw-400" [class]="gradeLetterSmall ? 'smaller-text' : ''">
              {{ gradeLetter }}
            </h2>
            <span *ngIf="gradeValue != null">
              GRADE

              <span class="pec-fw-700 pec-text-dark">
                {{ gradeValue }}
              </span>
            </span>
          </ion-row>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-card>
