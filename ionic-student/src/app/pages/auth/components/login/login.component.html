<ion-content
  id="pec-login-content"
  [scrollEvents]="true"
  forceOverscroll="false"
  [class.passcode-page]="usePasscode"
  [pecTrackView]="{ view: 'Login View' }"
  fullscreen="true"
>
  <div pecTransition pecTransitionType="movedown" class="pulldown-wrapper" *ngIf="!usePasscode">
    <div class="pulldown-hide" (click)="showCampusList = false" *ngIf="showCampusList && mobileSettings"></div>

    <div
      (click)="toggleCampusList()"
      class="pec-fs-17 pec-text-light-grey pec-bg-dark pec-bw-bottom-1 pec-bc-black pulldown-toggler"
      [class.active]="!showCampusList"
      aria-label="Expand"
    >
      {{ !selectedCampus || showCampusList ? 'Select Campus' : selectedCampus.Campus.Name }}
    </div>

    <div class="pulldown-list" *ngIf="showCampusList && mobileSettings">
      <div
        class="pec-text-light-grey pec-bg-dark pec-p-15 pec-bw-bottom-1 pec-bc-black pulldown-list-item"
        *ngFor="let cs of mobileSettings.CampusSettings"
        (click)="selectedCampus = cs; showCampusList = false"
      >
        {{ cs.Campus.Name }}
      </div>
    </div>
  </div>

  <div pecTransition pecTransitionType="fadedown" class="login-header">
    <div class="login-header-top-margin"></div>
    <h1 class="pec-m-0 pec-fs-22 pec-font-headline">
      Welcome {{ globalConfigs.themeId === 18 ? 'AIU ' : 'CTU ' }}Students!
    </h1>
    <div class="login-header-middle-margin"></div>
    <div
      class="logo-image"
      [class.pec-icon-ctu-logo-mtn]="globalConfigs.themeId === 9"
      [class.pec-icon-aiu-logo-compact]="globalConfigs.themeId === 18"
      aria-hidden="true"
    ></div>
    <div class="login-header-bottom-margin"></div>
    <div class="login-bkgd" aria-hidden="true">
      <div class="login-bkgd-1"></div>
      <div class="login-bkgd-2"></div>
      <div class="login-bkgd-3"></div>
    </div>
  </div>

  <ng-template [ngIf]="!isLoggedOutFaceId" [ngIfElse]="faceIdScreenPresent">
    <ng-container *ngIf="usePasscode">
      <pec-passcode pecTransition [options]="passcodeOptions"></pec-passcode>
    </ng-container>

    <ng-container *ngIf="!usePasscode">
      <form id="pec-login-form" [formGroup]="loginForm" (submit)="login()">
        <ion-grid>
          <ion-row pecTransition class="pec-mb-15">
            <ion-col class="login-password-wrap">
              <ion-list lines="none" class="ion-no-padding">
                <ion-item class="ion-no-padding pec-bw-bottom-1 pec-bc-dark">
                  <ion-label position="floating" class="pec-mr-0" mode="ios">Student Username</ion-label>
                  <ion-input
                    class="pec-pl-0 username-input"
                    formControlName="UserName"
                    autocomplete="off"
                    autocorrect="off"
                    autocapitalize="off"
                    spellcheck="false"
                    clearInput
                    (keyup.enter)="login()"
                  ></ion-input>
                </ion-item>

                <ion-item class="ion-no-padding pec-bw-bottom-1 pec-bc-dark login-password">
                  <ion-label position="floating" class="pec-mr-0" mode="ios">Case Sensitive Password</ion-label>
                  <ion-input
                    id="passwordInput"
                    class="pec-pl-0"
                    type="{{ showPassword ? 'text' : 'password' }}"
                    formControlName="Password"
                    autocomplete="off"
                    autocorrect="off"
                    autocapitalize="off"
                    spellcheck="false"
                    clearOnEdit="{{ showPassword ? false : false }}"
                    enterkeyhint="Sign In"
                    (keyup.enter)="login()"
                  ></ion-input>
                  <label
                    class="password-eye"
                    for="passwordInput"
                    (click)="togglePassword()"
                    [attr.aria-label]="'Tap to ' + showPassword ? 'hide' : 'show' + ' password'"
                  >
                    <i
                      [style.color]="showPassword ? '#666' : '#9c9fa1'"
                      class="pec-fs-22 pec-text-primary {{
                        showPassword ? 'pec-icon-password-eye-off' : 'pec-icon-password-eye'
                      }}"
                    ></i>
                  </label>
                </ion-item>
              </ion-list>
            </ion-col>
          </ion-row>

          <ion-row pecTransition class="pec-mb-5">
            <ion-col>
              <ion-button fill="outline" expand="block" type="submit" class="pec-fw-700 login-button">
                Sign In
              </ion-button>
            </ion-col>
          </ion-row>

          <ion-row pecTransition class="pec-fs-15 login-remember">
            <ion-col class="pec-d-flex pec-d-justify-content-center pec-d-align-items-center">
              <ion-label class="pec-mr-12">Remember My Username</ion-label>
              <ion-toggle formControlName="RememberMe" name="rememberMe" (ionChange)="toggleRememberMe()"></ion-toggle>
            </ion-col>
          </ion-row>

          <ion-row pecTransition>
            <ion-col>
              <ion-item
                lines="none"
                class="ion-no-padding ion-text-center"
                button="true"
                detail="false"
                (click)="presentActionSheet()"
              >
                <div class="pec-w-100 pec-text-link">Need Help Logging In?</div>
              </ion-item>
            </ion-col>
          </ion-row>
          <ion-row pecTransition class="pec-mt-n5">
            <ion-col class="ion-no-padding ion-text-center">
              Version: {{ globalConfigs.version }}
              <div *ngIf="memberInfoMessage" class="pec-fs-11">
                {{ memberInfoMessage }}
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>
      </form>
    </ng-container>
  </ng-template>

  <ng-template #faceIdScreenPresent>
    <ion-grid>
      <ion-row pecTransition>
        <ion-col class="pec-text-center">
          <ion-button expand="block" type="submit" (click)="getFaceIdLogin()" class="pec-button-primary">
            Sign In with Face ID
          </ion-button>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col class="pec-text-center">
          <p class="pec-fs-15">
            <a (click)="getStandardLogin()">Standard Login</a>
          </p>
        </ion-col>
      </ion-row>
    </ion-grid>
    <ion-footer class="ion-no-border login-footer">
      <ion-toolbar>
        <ion-row pecTransition>
          <ion-col class="ion-no-padding ion-text-center">
            Version: {{ globalConfigs.version }}
            <div *ngIf="memberInfoMessage" class="pec-fs-11">
              {{ memberInfoMessage }}
            </div>
          </ion-col>
        </ion-row>
      </ion-toolbar>
    </ion-footer>
  </ng-template>
</ion-content>

<div
  class="background-layer pec-bg-white"
  pecTransition
  pecTransitionType="fadeup"
  [pecTransitionDistanceY]="125"
></div>
