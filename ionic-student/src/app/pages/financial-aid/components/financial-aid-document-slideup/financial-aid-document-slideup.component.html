<ion-row class="modal-buffer" (click)="dismissModal()"></ion-row>
<ion-row *ngIf="document" class="modal-content-wrap">
  <ion-col>
    <div class="drag-handle" tappable (click)="dismissModal()"></div>
    <ion-grid>
      <ion-row class="document-header pec-pb-12 pec-mb-20">
        <ion-col>{{ document.Summary }}</ion-col>
      </ion-row>
      <ion-row *ngIf="document.Details" class="overview-description pec-mb-20">
        <ion-col [innerHtml]="document.Details"></ion-col>
      </ion-row>
      <ion-row *ngIf="!document.Details" class="overview-description pec-mb-20">
        <ion-col>
          <span>
            You'll need some extra help with this document. Please contact your Financial Aid Advisor for assistance.
          </span>
        </ion-col>
      </ion-row>
      <ion-row class="pec-mb-20" *ngIf="!document.DocumentSubmissionDate && timeToComplete">
        <ion-col>
          <span class="doc-time-complete pec-fw-600 pec-fs-11">
            <i class="pec-icon-clock-android pec-fs-17 pec-mr-5"></i>
            {{ timeToComplete }}
          </span>
        </ion-col>
      </ion-row>
      <ion-row class="pec-mb-20" *ngIf="document.DocumentSubmissionDate">
        <ion-col>
          <div class="document-submitted-wrap pec-fw-600 pec-fs-11 pec-pb-3">
            <i class="pec-icon-check-single"></i>
            Document submitted on {{ document.DocumentSubmissionDate | pecDate: 'M/d/YY' | async }}
          </div>
        </ion-col>
      </ion-row>
      <ion-row class="pec-mb-25">
        <ion-col *ngIf="isUpload">
          <ion-button
            (click)="$event.stopPropagation(); dismissModal()"
            [routerLink]="['/tabs/financial-aid/document-upload']"
            [state]="{
              docSummary: this.document.Summary,
              docId: this.document.CmDocumentId,
              docTypeId: this.document.CmDocTypeId
            }"
            class="pec-button-primary"
            [disabled]="globalConfigs.isImpersonatedUser"
            [pecTrackEvent]="{
              category: 'Document Detail View',
              action: 'Tapped to Upload Document',
              label: document.CmDocTypeId.toString(),
              value: ''
            }"
          >
            Upload
          </ion-button>
        </ion-col>
        <ion-col *ngIf="isEsign && documentLink">
          <ion-button
            (click)="$event.stopPropagation(); dismissModal()"
            pecUrlRedirect
            pecOpenIn="browser"
            [pecUrl]="documentLink"
            class="pec-button-primary"
            [disabled]="globalConfigs.isImpersonatedUser"
            [pecTrackEvent]="{
              category: 'Document Detail View',
              action: 'Tapped to Esign Document',
              label: document.CmDocTypeId.toString(),
              value: ''
            }"
          >
            E-Sign
          </ion-button>
        </ion-col>
        <ion-col *ngIf="isComplete && documentLink">
          <ion-button
            (click)="$event.stopPropagation(); dismissModal()"
            pecUrlRedirect
            pecOpenIn="browser"
            [pecUrl]="documentLink"
            class="pec-button-primary"
            [disabled]="globalConfigs.isImpersonatedUser"
            [pecTrackEvent]="{
              category: 'Document Detail View',
              action: 'Tapped to Complete Document',
              label: document.CmDocTypeId.toString(),
              value: ''
            }"
          >
            Launch
          </ion-button>
        </ion-col>
        <ion-col *ngIf="isAccessDoc && documentLink">
          <ion-button
            (click)="$event.stopPropagation(); dismissModal()"
            pecUrlRedirect
            pecOpenIn="browser"
            [pecUrl]="documentLink"
            class="pec-button-primary"
            [pecTrackEvent]="{
              category: 'Document Detail View',
              action: 'Tapped to Access Document',
              label: document.CmDocTypeId.toString(),
              value: ''
            }"
          >
            Access Doc
          </ion-button>
        </ion-col>
      </ion-row>
      <pec-financial-aid-document-contact
        [eventCategory]="'Document Detail'"
        [document]="document"
      ></pec-financial-aid-document-contact>
    </ion-grid>
  </ion-col>
</ion-row>
