<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button class="pec-back-button" [text]="''" [icon]="''"></ion-back-button>
    </ion-buttons>
    <ion-title>
      <div>Group Live Chats</div>
      <div class="subtitle">
        {{ assignment.AssignmentName }}
      </div>
    </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content forceOverscroll="false">
  <pec-loading *ngIf="showLoading"></pec-loading>
  <ion-list *ngIf="!showLoading">
    <ion-list-header class="upcoming-live-chat-header">
      <ion-label>UPCOMING LIVE CHATS</ion-label>
    </ion-list-header>
    <div *ngIf="liveSession && liveSession.length > 0">
      <ion-item *ngFor="let session of liveSession">
        <ion-label>
          <button
            [pecTrackEvent]="{
              category: 'Group Live Chats',
              action: 'Tapped to Access Live Chat',
              label: 'Live Chat',
              value: '',
              classId: classId
            }"
            class="bookshelf-redirect"
            (click)="launchLiveChat(session)"
          >
            <ion-grid>
              <ion-row class="bookshelf-title">{{ session.Title }}</ion-row>
              <ion-row class="bookshelf-term">Chat Open</ion-row>
            </ion-grid>
          </button>
        </ion-label>
      </ion-item>
    </div>
    <div class="archived-chats-message" *ngIf="!liveSession || liveSession.length <= 0">
      <p class="live-chats-unavailable pec-fs-15">Currently there are no live chats scheduled.</p>
    </div>
  </ion-list>
  <ion-list *ngIf="!showLoading">
    <ion-list-header class="upcoming-live-chat-header">
      <ion-label>CHAT ARCHIVE</ion-label>
    </ion-list-header>

    <div *ngIf="zoomConcludedChatList && zoomConcludedChatList.length > 0">
      <ion-item *ngFor="let chat of zoomConcludedChatList">
        <ion-label>
          <button
            *ngIf="chat.MeetingRecordedStatusId == 5"
            [pecTrackEvent]="{
              category: 'Group Live Chats',
              action: 'Tapped to Access Live Chat',
              label: 'Archive',
              value: '',
              classId: classId
            }"
            class="bookshelf-redirect"
            (click)="launchZoomArchiveChat(chat)"
          >
            <ion-grid>
              <ion-row class="bookshelf-title">{{ chat.Title }}</ion-row>
              <ion-row class="bookshelf-term">{{ chat.RecordingDurationSeconds | pecDuration }}</ion-row>
              <ion-row class="bookshelf-course">
                Recorded on {{ chat.RecordingStartDate | pecDate: 'MMMM d' | async }} at
                {{ chat.RecordingStartDate | pecDate: 'h:mm a' | async }} {{ timeZoneCode }}
              </ion-row>
            </ion-grid>
          </button>
        </ion-label>
      </ion-item>
    </div>

    <div class="archived-chats-message">
      <p
        class="archived-chats-unavailable pec-pb-15 pec-fs-15"
        *ngIf="!zoomConcludedChatList || zoomConcludedChatList.length == 0"
      >
        No archived chats available.
      </p>
      <p class="archived-chats-description pec-pb-8">
        Archived chats are usually available on the app 1-2 hours after a chat has ended. To view chats sooner, log into
        your virtual campus from your desktop.
      </p>
    </div>
  </ion-list>
</ion-content>
